% A=[ 0.000000046852516, 0, -0.000000016602193, 0 ,  0.000000043409919, 0,  -0.000000016602193, 0 ,  0.000000058517100   ,0,-0.000000016602193,0;
%  0.000000007795290, 0.000000016602193, 0 , 0, 0.000000015348881, 0.000000016602193 , 0 , 0, 0.000000022234075 , 0.000000016602193, 0 , 0;
%  0, 0 ,0  , 1.000000000000000 ,  0,  0  ,  0  , 1.000000000000000 ,    0,  0 ,     0  , 1.000000000000000]
% b=1.0e+02 *[1.000000000000000;
%                    0;
%                    0;
%                    0;
%    0.100000000000000;
%    0.020735797017910;
%   -0.045497546329797;
%                    0;
%    0.100000000000000;
%   -0.045497546329797;
%   -0.020735797017910;
%                    0]
% A*b
%                    
%  X= 1.0e-05 *[0.5814;
%     0.1114;
%          0];
%  b1=pinv(A)*X
% %    b1=lsqr(A,X)
     
               

%                   
% A=[1 2 3 4 1 3 4 3 2 4 5 3;
%    3 4 6 5 4 8 9 0 5 4 1 0;
%   -2 3 -4 4 3 -2 -2 3 -3 2 1 2]
% b=[1;-7;8;1;8;4;3;6;67;76;34;-34]
% X=[571;792;-106];
% x=A*b
% c=pinv(A)*X

% c1=A'*inv(A'*A)*X


% A=[1 2 3 4;6 7 8 9;12 13 14 11]
% b=[8;3;2;6]
% X=A*b
% B=[44;139;229]
% C=pinv(A)*B

% A=[198 256 3 ;63 75 8 ;12 13 14]
% b=[8;3;2]
% X=A*b
% % B=[44;139;229]
% C=inv(A)*X
%                 
        



% x1 = [.2 .5 .6 .8 1.0 1.1 1.7 1.9]'; 
% x2 = [.1 .3 .4 .9 1.1 1.4 -2.3 -1]';
% x3 = [1 2 3 4 5 6 7 8]'; 
% X = [ones(size(x1)) x1 x2 x3]
% y = [.17 .26 .28 .23 .27 .34 4.5 -1.2]'
% 
% a = X\y
% % a =
% %     0.1203
% %     0.3284
% %    -0.1312
% 
%  [b,se_b,mse,S] = lscov(X,y) 
% w = [1 1 1 1 1 .1]'; 
% 
%  [bw,sew_b,msew] = lscov(X,y,w)

% V = .2*ones(length(x1)) + .8*diag(ones(size(x1))); 
% 
% [bg,sew_b,mseg] = lscov(X,y,V)
% b =
%     0.1203
%     0.3284
%    -0.1312
% se_b =
%     0.0643
%     0.2267
%     0.1488
% mse =
%     0.0015

 
% A=[1 2   3  4    5    6 ;
%    7 8 -12  11  -2    -1;
%    8 1  -3  0   -2    11;
%    2 3   8 -12  67  -0.4 ;
%    89 21 4 -6 -1 -2;
%    3  5 1 44 21 33];
% X=[12;34;-13;-11;15;89];
% 
% b=A*X;
% C=inv(A)*b

% 
% A=[1   2   3  4  1   3  4  3  2 ;
%    3   4   6  5  4   8  9  0  5 ;
%   -2   3  -4  4  3  -2 -2  3 -3];
% % b=[1;-7;8;1;9;4;3;6;67];
% b=[500;2;3;10;1;2;10;2;5];
% b1=b/b(4,1);
% A*b1;
% Ans=[61.6;171.1;-99.6];
% 
% 
% 
% % X=[199;454;-224];
% % X1=[24.8750;
% %     56.7500;
% %    -28.0000];
% % k=b/b(4,1)
% j=[A(:,1) A(:,2) A(:,3) A(:,5) A(:,6) A(:,7) A(:,8) A(:,9)]
% % v=[k(1,1); k(2,1); k(3,1);k(5,1);k(6,1);k(7,1);k(8,1);k(9,1)]
% l1=[22;51.25;-23.625];
% l=[A(:,4)];
% 
% x=pinv(j)*(Ans-A(:,4))
% 
% 
% 
% % x=A*(b/b(3,1));
% % c=pinv(A)*X1;

% A=[1 2 3;4 5 6;7 8 9];
% b=[10;11;12];
% n=[1;1.1;1.2];
% A*b
% A*n
% k=[68;167;266];
% k1=[6.8;16.7;26.6];
% % K=pinv(A(:,2:3))*(k-A(:,1))
% 
% K1=pinv(A(:,2:3))*(k1-A(:,1))
% 
% b1=b/b(1,1);
% b12=[b1(2,1);b1(3,1)];
% X=[2 3;5 6;8 9];
% X1=[1;4;7];

%%

 A=rand(3,4);
 b=[4/5;1;6/5;7/5]
 Z=A*b
 Z1=[A(:,1) A(:,3) A(:,4)];
%  V=pinv(Z1)*(Z-A(:,2))
V=pinv(Z1'*Z1)*Z1'*(Z-A(:,2))


%%

 A=rand(3,3);
 b=[4/5;1;6/5]
 Z=A*b
 Z1=[A(:,1) A(:,3)];
 V=pinv(Z1)*(Z-A(:,2))
 
 %%
 
 A=rand(3,5);
 b=[4/5;1;6/5;7/5;8/5]
 Z=A*b
 Z1=[A(:,1) A(:,3) A(:,4) A(:,5)];
 V=pinv(Z1'*Z1)*Z1'*(Z-A(:,2))
 
 %%
 n=301;
% h=zeros(n*3,1);
h=zeros(n*2,1);
index1=0;
% for i=1:3:3*n
%    h(i,:)=ones(1,3);
%    h(i+1,:)=ones(1,3);
%    h(i+2,:)=ones(1,3);
% end
load L_M1.dat
k=L_M1;
l=size(k);
% k=ones(301,5);
% for i=1:3:3*n
for i1=1:2:2*n
     
     index1=index1+1;
        
     h(i1,1)  =k(index1,1);
%       h(i,1)  =k(index1,1);
     
     h(i1+1,1)=k(index1,2);
%      h(i+2,1)=k(index1,3);
%      h(i+3,1)=k(index1,4);
%      h(i+4,1)=k(index1,5);
   
%    h(i+1,:)=ones(1,3);
%    h(i+2,:)=ones(1,3);
    
end   

load A.dat
j=A;
v=size(j);
g=zeros(n*2,9);
index2=0;
% for i=1:3:3*n
for i2=1:2:2*n
    
     index2=index2 +1;
        
%      g(i,1:3)  =j(index2,1:3);
%      g(i,4:6)  =j(index2,5:7);
%      g(i,7:9)  =j(index2,9:11);
     
      
%      g(i,1)  =j(index2,1);
%      g(i,2)  =j(index2,4);
%      g(i,3)  =j(index2,7);
% %      g(i,4)  =j(index2,10);
%      g(i,5)  =j(index2,13);
%      g(i,6)  =j(index2,16);
%      g(i,7)  =j(index2,19);
% %      g(i,8)  =j(index2,22);
%      g(i,9)  =j(index2,25);
%      g(i,10)  =j(index2,28);
%      g(i,11)  =j(index2,31);
% %      g(i,12)  =j(index2,34);
     
     
     g(i2,1)  =j(index2,1);
     g(i2,2)  =j(index2,4);
     g(i2,3)  =j(index2,7);
     
%      g(i,4)  =j(index2,10);

     g(i2,4)  =j(index2,13);
     g(i2,5)  =j(index2,16);
     g(i2,6)  =j(index2,19);
     
%      g(i,8)  =j(index2,22);

     g(i2,7)  =j(index2,25);
     g(i2,8)  =j(index2,28);
     g(i2,9)  =j(index2,31);
     
%      g(i,12)  =j(index2,34);
     
     
%      g(i+1,1:3)=j(index2,13:15);
%      g(i+1,4:6)=j(index2,17:19);
%      g(i+1,7:9)=j(index2,21:23);
     
     
     g(i2+1,1)  =j(index2,2);
     g(i2+1,2)  =j(index2,5);
     g(i2+1,3)  =j(index2,8);
%      g(i+1,4)  =j(index2,11);
     g(i2+1,4)  =j(index2,14);
     g(i2+1,5)  =j(index2,17);
     g(i2+1,6)  =j(index2,20);
%      g(i+1,8)  =j(index2,23);
     g(i2+1,7)  =j(index2,26);
     g(i2+1,8)  =j(index2,29);
     g(i2+1,9)  =j(index2,32);
%      g(i+1,12)  =j(index2,35);
     
     
%       g(i+1,1)  =j(index2,2);
%      g(i+1,2)  =j(index2,5);
%      g(i+1,3)  =j(index2,8);
% %      g(i+1,4)  =j(index2,11);
%      g(i+1,5)  =j(index2,14);
%      g(i+1,6)  =j(index2,17);
%      g(i+1,7)  =j(index2,20);
% %      g(i+1,8)  =j(index2,23);
%      g(i+1,9)  =j(index2,26);
%      g(i+1,10)  =j(index2,29);
%      g(i+1,11)  =j(index2,32);
% %      g(i+1,12)  =j(index2,35);
     
     
     
     
%      g(i+2,1:3)=j(index2,25:27 );
%      g(i+2,4:6)=j(index2,29:31);
%      g(i+2,7:9)=j(index2,33:35);
     
     
%      g(i+2,1)  =j(index2,3);
%      g(i+2,2)  =j(index2,6);
%      g(i+2,3)  =j(index2,9);
%      g(i+2,4)  =j(index2,12);
%      g(i+2,5)  =j(index2,15);
%      g(i+2,6)  =j(index2,18);
%      g(i+2,7)  =j(index2,21);
%      g(i+2,8)  =j(index2,24);
%      g(i+2,9)  =j(index2,27);
%      g(i+2,10) =j(index2,30);
%      g(i+2,11) =j(index2,33);
%      g(i+2,12) =j(index2,36);
     
     
     
     
%    g(i+3,1:6)=j(index2,19:24);
%    g(i+4,1:6)=j(index2,25:30);
   
%    h(i+1,:)=ones(1,3);
%    h(i+2,:)=ones(1,3);
    
end
%  w=cov(g',1);
%  size(w)
% w=[17;25;93;47;56;667;766;866;977];
%  w=[1;1;1;1;1;1;1;1;1];
  C=lsqr(g,h);
%   [b,se_b,mse,S]=lscov(g,h)

% [m,n]=size(g);

%  V = .2*ones(m)'
%  [bg,sew_b,mseg] = lscov(X,y,V)

  C=pinv(g)*h

% C=( (pinv(g)*h) + ( (eye(9)- pinv(g)*g)*w ) )
%%

 A=rand(8,8)
 b=[4/5;1;6/5;7/5;8/5;9/5;10/5;11/5]
 Z=A*b
 Z1=[A(:,1) A(:,3) A(:,4) A(:,5) A(:,6)];
 V=pinv(A'*A)*A'*Z
% V=Z-A*b
%  V=pinv(Z1)*(Z-A(:,2))
 %%
 
 A=rand(3,7);
 b=[4/5;1;6/5;7/5;8/5;9/5;10/5]
 Z=A*b
 Z1=[A(:,1) A(:,3) A(:,4) A(:,5) A(:,6) A(:,7)];
 V=pinv(Z1)*(Z-A(:,2))
 %%
 
 A=rand(3,8);
 b=[4/5;1;6/5;7/5;8/5;9/5;10/5;11/5]
 Z=A*b
 Z1=[A(:,1) A(:,3) A(:,4) A(:,5) A(:,6) A(:,7) A(:,8)];
 V=pinv(Z1)*(Z-A(:,2))

 
 %%
 
 A=rand(600,6)
%  b=[4/5;1;6/5;7/5;8/5;9/5;10/5;11/5]
 b=rand(6,1)
 Z=A*b
%  Z1=[A(:,1) A(:,3) A(:,4) A(:,5) A(:,6)];
 V=pinv(A'*A)*A'*Z
% V=Z-A*b
%  V=pinv(Z1)*(Z-A(:,2)) 
 
 %%
 
 D1=zeros(300,1);
 D2=zeros(300,9);
%  D3=zeros(300,1);
 for i=1:3:300
     
     A=rand(3,9); 
     b=[3;4;5;6;7;8;9;10;11]; 
     
     H=A*b;
     
     D1(i,:)   =H(1,1);
     D1(i+1,:) =H(2,1);
     D1(i+2,:) =H(2,1);
     
     D2(i,:)   =A(1,:);
     D2(i+1,:) =A(2,:);
     D2(i+2,:) =A(3,:);
 
 end
 
 D1
 D2
 
 K=rref(D2);
 
 V=pinv(K'*K)*K'*D1
 
 %%
 D1=zeros(700,1);
 D2=zeros(700,9);
%  D3=zeros(300,1);
 for i=1:2:700
     
     A=rand(2,9); 
     b=[3;4;5;6;7;8;9;10;11]; 
     
     H=A*b;
     
     D1(i,:)   =H(1,1);
     D1(i+1,:) =H(2,1);
%      D1(i+2,:) =H(2,1);
     
     D2(i,:)   =A(1,:);
     D2(i+1,:) =A(2,:);
%      D2(i+2,:) =A(3,:);
 
 end
 
 D1
 D2
 
 V=pinv(D2'*D2)*D2'*D1
 %%
 A=rand(4,5);
 b=[12;23;1;56;13];
 X=[A(:,1) A(:,2) A(:,4) A(:,5)]

 V=pinv(X'*X)*X'*(A*b-A(:,3))
 %%
 A=rand(1000,9);
 b=[12;23;1;56;13;33;123;11;32];
 X=[A(:,1) A(:,2) A(:,4) A(:,5) A(:,6) A(:,7) A(:,8) A(:,9)]
 V=pinv(X'*X)*X'*(A*b-A(:,3))
 
 %%
%  C = [0.9501    0.7620    0.6153    0.4057
%     0.2311    0.4564    0.7919    0.9354
%     0.6068    0.0185    0.9218    0.9169
%     0.4859    0.8214    0.7382    0.4102
%     0.8912    0.4447    0.1762    0.8936];
C=rand(5,4)

H=[0;0;0;0;0];

G=rref([C H])

% G=linsolve(C,H)


% V1=null(C);
% [u,s,v]=svd(C)


% d = [0.0578
%     0.3528
%     0.8131
%     0.0098
%     0.1388];
% 
% A = [0.2027    0.2721    0.7467    0.4659
%     0.1987    0.1988    0.4450    0.4186
%     0.6037    0.0152    0.9318    0.8462];
% 
% b = [0.5251
%      0.2026
%      0.6721];
%  
% Aeq = [3 5 7 9];
% beq = 4;
% lb = -0.1*ones(4,1);
% ub = 2*ones(4,1);
% 
% X=[0.1299;-0.5757;0.4251;0.2438];
% 
% V=C*X;
% 
% x = lsqlin(C,d,A,b,Aeq,beq,lb,ub);





%%


A=rand(602,9);
x=[3;4;5;6;7;8;9;10;11];
x1=x/7; % 5th element division

C=[A(:,1:4) A(:,6:9)]
% D=

% A1*x=

X=pinv(C)*A(:,5)
%%



